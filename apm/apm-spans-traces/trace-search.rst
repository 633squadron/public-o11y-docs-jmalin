.. _trace-search:

****************************************
Explore your traces using Trace Analyzer
****************************************

.. meta::
   :description: Use Trace Analyzer inside Splunk APM to detect patterns across billions of transactions to identify “unknown unknowns” problems across any combinations of tags, services, and users in your environment.

Trace Analyzer lets you search traces generated by your application and identify patterns in the full-fidelity trace data without prior knowledge of which tags are relevant. Trace Analyzer is available to all Splunk Observability Cloud users that use Splunk APM.

Examples of questions that Trace Analyzer helps you answer include:

-  How many traces and traces with errors exist for a given combination of service, environment, and tags?
-  For a given issue, which customers experience the highest error rate or latency?
-  How to locate error or latency spikes in my trace data?
-  How many traces have a duration between X and Y milliseconds?

To open Trace Analyzer, select :guilabel:`Traces` in Splunk APM. You can also open the trace search when loading example traces from a chart, or from anywhere else in Observability Cloud.

Filter and search
====================

To explore your trace data, use the following controls:

..  image:: /_images/apm/trace-analyzer/trace-analyzer.png
    :width: 95%
    :alt: Elements of the Trace Analyzer user interface

#. Filters for time range, environment, workflow, and services, as well as custom filters.
#. Type of search, tag grouping, minimum and maximum trace duration, and trace search by ID.
#. Real time chart of traces, with total and errors, as well as traces duration heatmap.
#. Table view of traces and group metrics, with total count of traces or trace durations.

Trace Analyzer searches all currently retained traces; see :ref:`apm-data-retention` to learn more about the default trace retention period.

Trace & error count chart
-------------------------------

The :guilabel:`Trace & error` count option shows total traces and traces with errors in a stacked bars chart. You can hover the mouse pointer over any of the bars to see the trace count.

..  image:: /_images/apm/trace-analyzer/trace-error-chart.gif
    :width: 95%
    :alt: Trace and error count chart showing data for each period

Drag over the chart to select a specific period within the available time frame. Select :guilabel:`Filter to selection` to update the time range filter.

..  image:: /_images/apm/trace-analyzer/trace-drag-drop-chart.gif
    :width: 95%
    :alt: Selection of a specific time frame

Trace duration
-------------------------------

The :guilabel:`Trace duration` option shows a heatmap of traces by their duration relative to each period within the selected time range.

..  image:: /_images/apm/trace-analyzer/heatmap.png
    :width: 95%
    :alt: Elements of the Trace Analyzer user interface.

Group by tag
-------------------------------

You can group all available traces by a single tag or attribute. For example, you can group all traces from your service by database table, host name, or HTTP status code.

..  image:: /_images/apm/trace-analyzer/trace-select-tag.png
    :width: 95%
    :alt: Tag selection menu of Trace Analyzer

The resulting :guilabel:`Group Metrics` tab shows different metrics depending on the type of view:

- When the :guilabel:`Trace & error count` view is active, the :guilabel:`Group Metrics` tab shows a breakdown of the top 100 values for the selected tag, ranked by the number of errors.
- When the :guilabel:`Trace duration` view is active, the :guilabel:`Group Metrics` tab shows a breakdown of top 100 values for the selected tag, ranked by maximum duration.

..  image:: /_images/apm/trace-analyzer/metric-tables.png
    :width: 95%
    :alt: Metric table in Trace analyzer

You can order both tables by the number of matching traces.

When to use Trace Analyzer
=============================================

Splunk Observability Cloud provides several tools for exploring application monitoring data. Trace Analyzer is suited to scenarios where high cardinality, high granularity searches and explorations are required for researching unknown or new issues. See :ref:`guideline-cardinality`.

The following table presents what each APM tool is best suited for:

.. list-table::
   :header-rows: 1
   :widths: 33 33 33
   :width: 100

   * - Trace Analyzer
     - Tag Spotlight / Service map
     - Monitoring MetricSets
   
   * - Identify patterns for unindexed tags
     - Surface trends for indexed tags
     - Get alerts on service degradation

   * - Trace-level analysis
     - Service-level analysis
     - Workflow and service level analysis

   * - High cardinality
     - Medium cardinality
     - Low cardinality

Learn more
=====================

See the following links for more information on Trace Analyzer: 

* :ref:`apm-use-case-trace-analyzer`